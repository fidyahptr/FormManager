<!DOCTYPE html>
<html>

<head>
    <title>Chatbot Ecommerce</title>
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <link rel="shortcut icon" href="https://cdn.technologyadvice.com/wp-content/uploads/2018/02/friendly-chatbot.jpg" />
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .height {
            height: 80vh;
        }
        
        body {
            background-color: #F5F7F9;
        }
        
        .bg-main {
            background-color: #425B76;
        }
        
        .bg-message {
            background-color: #F0F2F8;
        }
    </style>
</head>

<body>
    <div class="flex justify-center mt-8 relative">
        <div class="bg-white height rounded-t-3xl overflow-scroll shadow-md w-10/12 sm:w-10/12 md:w-10/12 lg:w-6/12 xl:w-6/12 pb-8 mt-5 sm:mt-5 md:mt-5 lg:mt-8 xl:mt-8">
            <div class="bg-main flex items-center flex-wrap text-white p-4 sticky top-0">
                <img class="rounded-full w-12 h-12 mr-3" src="https://cdn.technologyadvice.com/wp-content/uploads/2018/02/friendly-chatbot.jpg" alt="">
                <div class="flex-col">
                    <p class="font-semibold tracking-widest">Chippy</p>
                    <div class="text-xs font-light">Online</div>
                </div>
            </div>

            <div class="px-4 py-2 mr-10 sm:mr-38 md:mr-44 lg:mr-44 xl:mr-44">
                <div class="flex flex-col items-start">
                    <div class="font-semibold text-sm ml-1 mb-2">Chippy</div>
                    <div class="bg-message rounded-xl px-4 py-2 flex-1">
                        <p id="message">Selamat datang!</p>
                    </div>
                    <div class="bg-message rounded-xl px-4 py-2 flex-1 mt-3 text-justify">
                        <p>Perkenalkan nama saya <b>Chippy</b>. Saya dapat membantu Anda dalam pembelian laptop. Namun, chippy <b>tidak</b> dapat memberikan informasi harga atau spesifikasi laptop secara langsung. Chippy hanya dapat melakukan simulasi pemesanan
                            laptop untuk Anda.</p>
                    </div>
                    <div class="bg-message rounded-xl px-4 py-2 flex-1 mt-3">
                        <p>Apa yang bisa chippy bantu?</p>
                    </div>
                </div>
            </div>

            <!-- result -->
            <div id="myDiv"></div>

            <!-- user input -->
            <form class="flex fixed bottom-8 mb-4 sm:mb-8 md:mb-8 lg:mb-8 xl:mb-8 bg-white rounded-b-lg w-10/12 sm:w-10/12 md:w-10/12 lg:w-6/12 xl:w-6/12" id="myForm" action="" method="post" autocomplete="off">
                <input class="flex-1 bg-gray-200 rounded-bl-lg rounded-tr-lg px-4 py-2 focus:outline-none focus:shadow-outline " type="text" name="user_response" id="user_response" placeholder="Ketik pesan...">
                <button id="submit_button" class="ml-3 mr-2 bg-main text-white rounded-full shadow-lg shadow-gray-800/50 p-1 hover:bg-gray-600 focus:outline-none focus:shadow-outline" type="submit">
                  <svg width="36" height="22" viewBox="0 0 36 22" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <rect width="36" height="22" fill="url(#pattern0)"/>
                    <defs>
                    <pattern id="pattern0" patternContentUnits="objectBoundingBox" width="1" height="1">
                    <use xlink:href="#image0_12_9" transform="matrix(0.00810185 0 0 0.0111111 0.135417 0)"/>
                    </pattern>
                    <image id="image0_12_9" width="90" height="90" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC0klEQVR4nO3du2tUQRTH8dHEV6NCBAUbUbRU0MZCfDVWltopRvARUFv/BRUCFlr4L9haXqKgwTw0KCkkFqYwFjFZtNgYMLD7lcVZ3EIXXXfuzJz7+/wDe+fcy8w9c8+cdU5ERERERMQaYBNwC5gEVoCvwEvgGrAl9vWZAOwG3vJnn4ArwGDsa839Se4W5E7vgfPAutjXnR0/XfyrGeBM7GvPCjBF754BR2OPIQtAnf9XAIdijyVp9E8DeAzsiz0m64FuWwMeAbtijy0phLMC3AG2xR6j9UC31YDblU96KM8CcLWySQ/lmwPOVS7pIZ5p4KyrCuIbB44560hHARx0VpGWhk969jprSNN3n/TsdFaQtrqZpIc81HzSs9nlirx89EnPgMsNeXqXXdJD3qaA0y4H2FAAR1zKsKPp38EPuBT5Fd2Shg/4HpcS4Dk2rQL3gCGXAmAY2+o+6dkaO9CDfsvSukXgBrAxZrCHgFdUwzxwAVgfK9gDwCVgwn9YtW42iQ8PwPbWuylw0c9xT4AP2DMJnHKpMXwDCuCwSx02bkA76dnvcsPPhfYEcB14ADwFPpO2VrXV/ahvKP0C7ABOAiPAQ38DlkjLqLOK39+A5UiBXnZWkdaTvuRyx6+5e6Rj7k5t6rjrMgvo8Y7FcCyTxXAU2OBSg17vFNCkE5YuT2gTW8pNwf2m0rD/4W/YN1v6ppJfsF5TDfNRtkn9xn8V9qIXo278A5exrZ7Kp6wX2LSa2sdZlRuUATuaqRfQWFCoJCwsFTkGprLdwFSIHpiOVgSmw0KB6fhbYA0d6Ayv0BHlsMZ16D6s6SSqOctC+eayOyPYDyUGeEGtfsKqqXmV2rGVJ8ATvKYGg2ED3VDLzO5PtJrAlkFtjUsC3OxhmphRo+7eWs+/+csAq/V8H/5MoVuw9WcK/dIqlfIlUxN+gfziN3xaPYz09yAiIiIiIiIuEz8AGCMY7UsTApoAAAAASUVORK5CYII="/>
                    </defs>
                    </svg>
               
              </button>
            </form>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script>
        function multiple_tipe(option) {
            const form = document.getElementById('myForm');
            document.getElementById("user_response").value = option;
            // submit the form
            document.getElementById('submit_button').click();
            document.getElementById("multiple_tipe_container").remove();
            //form.submit();
        }

        document.getElementById("myForm").addEventListener("submit", function(event) {
            event.preventDefault(); // Prevent the form from submitting normally
            var formData = new FormData(this); // Get the form data
            var xhr = new XMLHttpRequest(); // Create a new XMLHttpRequest object
            xhr.open("POST", "{{ url_for('indexBP.index') }}"); // Set the URL to the Flask route that will process the form data
            xhr.onload = function() {
                if (xhr.status === 200) {
                    document.getElementById("myDiv").innerHTML += xhr.responseText; // Append the response from the server to the content of the div
                } else {
                    console.log("Request failed. Returned status: " + xhr.status);
                }
            };
            xhr.send(formData); // Send the form data to the server
            document.getElementById("user_response").value = "";
        });
    </script>
</body>

</html>